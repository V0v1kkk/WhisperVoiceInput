<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:WhisperVoiceInput.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:models="using:WhisperVoiceInput.Models"
        xmlns:converters="using:WhisperVoiceInput.Converters"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
        x:Class="WhisperVoiceInput.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Width="570"
        Height="890"
        Icon="/Assets/lecturer-white.png"
        Title="WhisperVoiceInput Settings"
        Closing="Window_Closing">

    <Window.Resources>
        <converters:EnumToBooleanConverter x:Key="EnumToBooleanConverter"/>
    </Window.Resources>

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <!-- ScrollViewer to allow vertical scrolling -->
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="15" Spacing="20">

            <!-- Connection Settings -->
            <HeaderedContentControl Header="Connection Settings">
                <StackPanel Spacing="12">
                    
                    <!-- Server Address -->
                    <StackPanel>
                        <TextBlock Text="Server Address (required)"
                                 FontWeight="Bold"/>
                        <TextBlock Text="Enter the base URL before audio transcription."
                                 FontSize="12"
                                 Opacity="0.7"
                                 Margin="0,0,0,4"/>
                        <TextBox Text="{Binding ServerAddressInput}"
                                Watermark="Base URL before audioTranscription"/>
                    </StackPanel>

                    <!-- API Key -->
                    <StackPanel>
                        <TextBlock Text="API Key"
                                 FontWeight="Bold"/>
                        <TextBlock Text="Your secret key from the provider."
                                 FontSize="12"
                                 Opacity="0.7"
                                 Margin="0,0,0,4"/>
                        <TextBox Text="{Binding ApiKeyInput}"
                                PasswordChar="â€¢"
                                Watermark="sk-..."/>
                    </StackPanel>

                    <!-- Model -->
                    <StackPanel>
                        <TextBlock Text="Model"
                                 FontWeight="Bold"/>
                        <TextBlock Text="Name of the model to use, e.g. whisper-large."
                                 FontSize="12"
                                 Opacity="0.7"
                                 Margin="0,0,0,4"/>
                        <TextBox Text="{Binding ModelInput}"
                                Watermark="whisper-large"/>
                    </StackPanel>

                    <!-- Language -->
                    <StackPanel>
                        <TextBlock Text="Language"
                                 FontWeight="Bold"/>
                        <TextBlock Text="Preferred language code (e.g. en, es, fr)."
                                 FontSize="12"
                                 Opacity="0.7"
                                 Margin="0,0,0,4"/>
                        <TextBox Text="{Binding LanguageInput}"
                                Watermark="en"/>
                    </StackPanel>

                    <!-- Prompt -->
                    <StackPanel>
                        <TextBlock Text="Prompt"
                                 FontWeight="Bold"/>
                        <TextBlock Text="Enter your own specific words or phrases to guide recognition."
                                 FontSize="12"
                                 Opacity="0.7"
                                 Margin="0,0,0,4"/>
                        <TextBox Text="{Binding PromptInput}"
                                AcceptsReturn="True"
                                MinHeight="60"
                                Height="100"
                                VerticalAlignment="Stretch"
                                TextWrapping="Wrap"
                                ScrollViewer.VerticalScrollBarVisibility="Auto"
                                Watermark="Enter your unique words and phrases"/>
                    </StackPanel>
                </StackPanel>
            </HeaderedContentControl>

            <!-- Audio Settings -->
            <HeaderedContentControl Header="Audio Settings">
                <StackPanel Spacing="12">
                    
                    <!-- Save Audio File Toggle -->
                    <StackPanel>
                        <TextBlock Text="Save Audio File"
                                 FontWeight="Bold"/>
                        <TextBlock Text="Check to enable saving the recorded audio locally."
                                 FontSize="12"
                                 Opacity="0.7"
                                 Margin="0,0,0,4"/>
                        <ToggleSwitch IsChecked="{Binding SaveAudioFileInput}"/>
                    </StackPanel>

                    <!-- Audio File Save Path -->
                    <StackPanel IsEnabled="{Binding SaveAudioFile}">
                        <TextBlock Text="Audio File Save Path"
                                 FontWeight="Bold"/>
                        <TextBlock Text="Location where the audio file will be saved (required if saving is enabled)."
                                 FontSize="12"
                                 Opacity="0.7"
                                 Margin="0,0,0,4"/>
                        <TextBox Text="{Binding AudioFilePathInput}"
                                Watermark="Audio file save path..."/>
                    </StackPanel>
                </StackPanel>
            </HeaderedContentControl>

            <!-- Result Output Settings -->
            <HeaderedContentControl Header="Result Output Settings">
                <StackPanel Spacing="12">
                    <StackPanel>
                        <TextBlock Text="Output Method"
                                 FontWeight="Bold"/>
                        <TextBlock Text="Choose how the transcribed text should be output."
                                 FontSize="12"
                                 Opacity="0.7"
                                 Margin="0,0,0,4"/>
                        <RadioButton Content="Copy to Clipboard"
                                   IsChecked="{Binding OutputTypeInput, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter={x:Static models:ResultOutputType.Clipboard}}"/>
                        <RadioButton Content="Use wl-copy (Wayland)"
                                   IsChecked="{Binding OutputTypeInput, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter={x:Static models:ResultOutputType.WlCopy}}"/>
                        <RadioButton Content="Type with ydotool"
                                   IsChecked="{Binding OutputTypeInput, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter={x:Static models:ResultOutputType.YdotoolType}}"/>
                    </StackPanel>
                </StackPanel>
            </HeaderedContentControl>

        </StackPanel>
    </ScrollViewer>

</Window>
